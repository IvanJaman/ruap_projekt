<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Grade Prediction</title>
</head>
<body>
    <h2>Predvidi konačnu ocjenu iz matematike (G3)</h2>

    <form id="predictionForm">

    <label>Škola (GP ili MS):</label>
    <input type="text" id="school"><br><br>

    <label>Spol (M = muško, F = žensko):</label>
    <input type="text" id="sex"><br><br>

    <label>Dob:</label>
    <input type="number" id="age"><br><br>

    <label>Mjesto stanovanja (U = urbano, R = ruralno):</label>
    <input type="text" id="address"><br><br>

    <label>Veličina obitelji (LE3 = manje od 3 člana, GT3 = više od 3 člana):</label>
    <input type="text" id="famsize"><br><br>

    <label>Status roditelja (T = u braku, A = razvedeni):</label>
    <input type="text" id="Pstatus"><br><br>

    <label>Obrazovanje majke (0 - bez škole...4 - visoko obrazovanje):</label>
    <input type="number" id="Medu"><br><br>

    <label>Obrazovanje oca (0 - bez škole...4 - visoko obrazovanje):</label>
    <input type="number" id="Fedu"><br><br>

    <label>Zanimanje majke (teacher, health, services, at_home, other):</label>
    <input type="text" id="Mjob"><br><br>

    <label>Zanimanje oca (teacher, health, services, at_home, other):</label>
    <input type="text" id="Fjob"><br><br>

    <label>Razlog odabira škole (home, reputation, course, other):</label>
    <input type="text" id="reason"><br><br>

    <label>Skrbnik učenika (mother, father, other):</label>
    <input type="text" id="guardian"><br><br>

    <label>Vrijeme putovanja do škole (1-manje od 15 min, 2=15-30, 3=30-60, 4= više od 60 min):</label>
    <input type="number" id="traveltime"><br><br>

    <label>Tjedno vrijeme učenja (1= manje od 2h, 2=2-5h, 3=5-10h, 4= više od 10h):</label>
    <input type="number" id="studytime"><br><br>

    <label>Broj prethodnih padova razreda:</label>
    <input type="number" id="failures"><br><br>

    <label>Dodatna školska podrška (yes/no):</label>
    <input type="text" id="schoolsup"><br><br>

    <label>Obiteljske dodatne instrukcije (yes/no):</label>
    <input type="text" id="famsup"><br><br>

    <label>Plaćene dodatne instrukcije (yes/no):</label>
    <input type="text" id="paid"><br><br>

    <label>Izvanškolske aktivnosti (yes/no):</label>
    <input type="text" id="activities"><br><br>

    <label>Pohađanje vrtića (yes/no):</label>
    <input type="text" id="nursery"><br><br>

    <label>Želiš li pohađati više obrazovanje? (yes/no):</label>
    <input type="text" id="higher"><br><br>

    <label>Pristup internetu kod kuće (yes/no):</label>
    <input type="text" id="internet"><br><br>

    <label>U ljubavnoj vezi (yes/no):</label>
    <input type="text" id="romantic"><br><br>

    <label>Kvaliteta obiteljskih odnosa (1-5):</label>
    <input type="number" id="famrel"><br><br>

    <label>Slobodno vrijeme nakon škole (1-5):</label>
    <input type="number" id="freetime"><br><br>

    <label>Izlasci s prijateljima (1-5):</label>
    <input type="number" id="goout"><br><br>

    <label>Konzumacija alkohola radnim danima (1-5):</label>
    <input type="number" id="Dalc"><br><br>

    <label>Konzumacija alkohola vikendom (1-5):</label>
    <input type="number" id="Walc"><br><br>

    <label>Zdravstveno stanje (1-5):</label>
    <input type="number" id="health"><br><br>

    <label>Broj izostanaka s nastave:</label>
    <input type="number" id="absences"><br><br>

    <label>Ocjena na kraju prvog polugodišta:</label>
    <input type="number" id="G1"><br><br>

    <label>Ocjena na kraju drugog polugodišta:</label>
    <input type="number" id="G2"><br><br>

    <button type="submit">Predvidi završnu ocjenu (G3)</button>

    </form>

    <p id="result"></p>


    <script>
        document.getElementById("predictionForm").addEventListener("submit", async function(e) {
            e.preventDefault();

            const data = {
                school: document.getElementById("school").value,
                sex: document.getElementById("sex").value,
                age: parseInt(document.getElementById("age").value),
                address: document.getElementById("address").value,
                famsize: document.getElementById("famsize").value,
                Pstatus: document.getElementById("Pstatus").value,
                Medu: parseInt(document.getElementById("Medu").value),
                Fedu: parseInt(document.getElementById("Fedu").value),
                Mjob: document.getElementById("Mjob").value,
                Fjob: document.getElementById("Fjob").value,
                reason: document.getElementById("reason").value,
                guardian: document.getElementById("guardian").value,
                traveltime: parseInt(document.getElementById("traveltime").value),
                studytime: parseInt(document.getElementById("studytime").value),
                failures: parseInt(document.getElementById("failures").value),
                schoolsup: document.getElementById("schoolsup").value,
                famsup: document.getElementById("famsup").value,
                paid: document.getElementById("paid").value,
                activities: document.getElementById("activities").value,
                nursery: document.getElementById("nursery").value,
                higher: document.getElementById("higher").value,
                internet: document.getElementById("internet").value,
                romantic: document.getElementById("romantic").value,
                famrel: parseInt(document.getElementById("famrel").value),
                freetime: parseInt(document.getElementById("freetime").value),
                goout: parseInt(document.getElementById("goout").value),
                Dalc: parseInt(document.getElementById("Dalc").value),
                Walc: parseInt(document.getElementById("Walc").value),
                health: parseInt(document.getElementById("health").value),
                absences: parseInt(document.getElementById("absences").value),
                g1: parseInt(document.getElementById("G1").value),
                g2: parseInt(document.getElementById("G2").value)
            };

            const response = await fetch("http://127.0.0.1:8000/predict", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            });

            const result = await response.json();
            document.getElementById("result").innerText =
                "Predviđena ocjena na kraju godine (G3): " + result.prediction.toFixed(2);
        });
    </script>
</body>
</html>
